<h2 class="mt-16">Add New Pecipe</h2>

<div class="container">
  <form (submit)="submitHandled($event)">
    <div class="form-group">
      <label class="label">Title
        <input [(ngModel)]="recipe.title" type="text" name="title" class="form-control" placeholder="Title">
      </label>
      <!-- <small class="form-text text-muted">We'll never share your email with anyone else.</small> -->
    </div>

    <div class="form-group">
      <label class="label">Description
        <textarea
        [(ngModel)]="recipe.description"
        class="form-control"
        id="exampleFormControlTextarea1"
        name="description"
        rows="6"></textarea>
      </label>
    </div>

    <div class="form-group">
      <label class="label">Photo URL
        <input
          [(ngModel)]="recipe.photoUrl"
          name="photoUrl"
          type="url" class="form-control"
          placeholder="Photo URL"
        >
      </label>
    </div>

    <div class="form-group">
      <span class="mr-16 dib">Ingredients</span>
      <button
        class="btn btn-success"
        type="button"
        (click)="toogleIngtidientsList()"
      >
      <fa name="plus" *ngIf="!ingtidientsListShow else minus"></fa>
      <ng-template #minus>
        <fa name="minus"></fa>
      </ng-template>
      </button>
    </div>

    <ng-container *ngIf="ingtidientsListShow">
      <div class="form-inline mb-16">
        <div class="d-flex align-items-baseline w-100">
          <input type="text"
            class="form-control flex-grow-1 mr-16"
            #ingtidientInput
            placeholder="Ingtidient"
            (keydown.enter)="addIngtidient(ingtidientInput)"
          >
          <button
            type="button"
            class="btn btn-primary"
            (click)="addIngtidient(ingtidientInput)"
          >Add</button>
        </div>
      </div>
    </ng-container>

    <ul class="list-group mb-16" *ngIf="ingredients.length && ingtidientsListShow">
      <app-purchases-item
        *ngFor="let ingredient of ingredients"
        [purchase]="ingredient"
        (onRmPurchase)=rmIngtidient(ingredient)
        ></app-purchases-item>
    </ul>

    <div class="form-group">
        <label class="label">Instructions
          <textarea
          class="form-control"
          rows="5"
          [(ngModel)]="recipe.instructions"
          name="instructions"
          ></textarea>
        </label>
        </div>
        
        <div class="form-group">
          <label class="label">Category
            <select class="form-control"
            [(ngModel)]="recipe.categoryId"
            name="categoryId">
            <ng-container *ngFor="let category of categories">
              <option [value]="category">{{ category | decodeCategory }}</option>
            </ng-container>
          </select>
        </label>
    </div>
    <button type="submit" class="btn btn-primary">Submit</button>
  </form>
</div>

<app-recipes-list class="card-deck"></app-recipes-list>